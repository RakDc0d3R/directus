import{defineComponent as e,shallowRef as t,openBlock as o,createElementBlock as i,normalizeStyle as r,resolveComponent as n,Fragment as s,createElementVNode as l,createVNode as d,withCtx as a,createTextVNode as c}from"vue";const p="vue-email-editor",u="2.1.0",m="//editor.unlayer.com/embed.js?2",h=[];let f=!1;const g=()=>{if(f){let e;for(;e=h.shift();)e()}},v=e=>{if((e=>{h.push(e)})(e),(()=>{const e=document.querySelectorAll("script");let t=!1;return e.forEach((e=>{e.src.includes(m)&&(t=!0)})),t})())g();else{const e=document.createElement("script");e.setAttribute("src",m),e.onload=()=>{f=!0,g()},document.head.appendChild(e)}};let y=0;const E=e({name:"EmailEditor",props:{editorId:String,minHeight:{type:String,default:"500px"},options:Object,appearance:Object,locale:String,projectId:Number,tools:Object},computed:{id(){return this.editorId||"editor-"+ ++y}},setup:()=>({editor:t(null)}),mounted(){v(this.loadEditor.bind(this))},methods:{loadEditor(){const e=this.options||{};this.appearance&&(e.appearance=this.appearance),this.locale&&(e.locale=this.locale),this.projectId&&(e.projectId=this.projectId),this.tools&&(e.tools=this.tools),this.editor=unlayer.createEditor({...e,id:this.id,source:{name:p,version:u}}),this.$emit("load"),this.editor.addEventListener("editor:ready",(()=>{this.$emit("ready")}))},exportHtml(e){var t;null==(t=this.editor)||t.exportHtml(e)},loadDesign(e){var t;null==(t=this.editor)||t.loadDesign(e)},saveDesign(e){var t;null==(t=this.editor)||t.saveDesign(e)}}}),j=["id"];var H={id:"directus-extension-unlayer",name:"Unlayer Email Editor",icon:"email",description:"This is an email editor to build beautiful, responsive designs quickly and easily.",component:((e,t)=>{const o=e.__vccOpts||e;for(const[e,i]of t)o[e]=i;return o})({props:{value:{type:JSON,default:null}},emits:["input"],setup:(e,{emit:t})=>({handleChange:function(e){t("input",e)}}),name:"app",components:{EmailEditor:((e,t)=>{const o=e.__vccOpts||e;for(const[e,i]of t)o[e]=i;return o})(E,[["render",function(e,t,n,s,l,d){return o(),i("div",{id:e.id,class:"unlayer-editor",style:r({minHeight:e.minHeight})},null,12,j)}],["__scopeId","data-v-4f9aebc6"]])},data:()=>({minHeight:"1000px",locale:"en",projectId:0,tools:{image:{enabled:!0}},options:{},appearance:{theme:"dark",panels:{tools:{dock:"right"}}}}),methods:{editorReady(){document.querySelector("iframe").style.minWidth="100%",document.querySelector("iframe").style.minHeight="1000px"},editorLoaded(){if(null!=this.$props.value){var e=JSON.parse(JSON.stringify(this.$props.value.design));this.$refs.emailEditor.editor.loadDesign(e)}},saveDesign(){this.$refs.emailEditor.editor.saveDesign((e=>{console.log("saveDesign",e)}))},exportHtml(){this.$refs.emailEditor.editor.exportHtml((e=>{this.handleChange(e),console.log("save exportHtml",e)}))}}},[["render",function(e,t,r,p,u,m){const h=n("v-button"),f=n("EmailEditor");return o(),i(s,null,[l("div",null,[d(h,{onClick:m.exportHtml},{default:a((()=>[c("Export HTML")])),_:1},8,["onClick"])]),d(f,{ref:"emailEditor",editor:e.editor,"onUpdate:editor":t[0]||(t[0]=t=>e.editor=t),"min-height":u.minHeight,"project-id":u.projectId,locale:u.locale,tools:u.tools,options:u.options,onReady:m.editorReady,onLoad:m.editorLoaded},null,8,["editor","min-height","project-id","locale","tools","options","onReady","onLoad"])],64)}],["__file","interface.vue"]]),options:null,types:["json"]};export{H as default};
